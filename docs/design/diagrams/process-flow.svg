<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="800"
   height="800"
   version="1.1"
   id="svg30"
   sodipodi:docname="process-flow.svg"
   inkscape:version="1.4 (e7c3feb1, 2024-10-09)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs30" />
  <sodipodi:namedview
     id="namedview30"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="1.02125"
     inkscape:cx="515.54468"
     inkscape:cy="198.77601"
     inkscape:window-width="1568"
     inkscape:window-height="947"
     inkscape:window-x="234"
     inkscape:window-y="46"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg30" />
  <!-- Background -->
  <rect
     width="842.10529"
     height="836.2301"
     fill="#f8f9fa"
     id="rect1"
     x="-20.563036"
     y="-19.583843"
     style="stroke-width:1.04896" />
  <!-- Title -->
  <text
     x="400"
     y="30"
     font-family="Arial"
     font-size="20"
     text-anchor="middle"
     font-weight="bold"
     id="text1">FusionXPay Process Flow</text>
  <!-- Actors -->
  <rect
     x="50"
     y="70"
     width="120"
     height="40"
     rx="5"
     fill="#d4e6f1"
     stroke="#2874a6"
     stroke-width="2"
     id="rect2" />
  <text
     x="110"
     y="95"
     font-family="Arial"
     font-size="14"
     text-anchor="middle"
     id="text2">Merchant</text>
  <rect
     x="200"
     y="70"
     width="120"
     height="40"
     rx="5"
     fill="#fadbd8"
     stroke="#c0392b"
     stroke-width="2"
     id="rect3" />
  <text
     x="260"
     y="95"
     font-family="Arial"
     font-size="14"
     text-anchor="middle"
     id="text3">Order Service</text>
  <rect
     x="350"
     y="70"
     width="120"
     height="40"
     rx="5"
     fill="#fadbd8"
     stroke="#c0392b"
     stroke-width="2"
     id="rect4" />
  <text
     x="410"
     y="95"
     font-family="Arial"
     font-size="14"
     text-anchor="middle"
     id="text4">Payment Service</text>
  <rect
     x="500"
     y="70"
     width="120"
     height="40"
     rx="5"
     fill="#f9e79f"
     stroke="#d35400"
     stroke-width="2"
     id="rect5" />
  <text
     x="560"
     y="95"
     font-family="Arial"
     font-size="14"
     text-anchor="middle"
     id="text5">Message Queue</text>
  <rect
     x="650"
     y="70"
     width="120"
     height="40"
     rx="5"
     fill="#d5f5e3"
     stroke="#1e8449"
     stroke-width="2"
     id="rect6" />
  <text
     x="710"
     y="95"
     font-family="Arial"
     font-size="14px"
     text-anchor="middle"
     id="text6">Payment Providers</text>
  <!-- Vertical timeline lines -->
  <line
     x1="110"
     y1="110"
     x2="110"
     y2="750"
     stroke="#2c3e50"
     stroke-width="1"
     stroke-dasharray="5,5"
     id="line6" />
  <line
     x1="260"
     y1="110"
     x2="260"
     y2="750"
     stroke="#2c3e50"
     stroke-width="1"
     stroke-dasharray="5,5"
     id="line7" />
  <line
     x1="410"
     y1="110"
     x2="410"
     y2="750"
     stroke="#2c3e50"
     stroke-width="1"
     stroke-dasharray="5,5"
     id="line8" />
  <line
     x1="560"
     y1="110"
     x2="560"
     y2="750"
     stroke="#2c3e50"
     stroke-width="1"
     stroke-dasharray="5,5"
     id="line9" />
  <line
     x1="710"
     y1="110"
     x2="710"
     y2="750"
     stroke="#2c3e50"
     stroke-width="1"
     stroke-dasharray="5,5"
     id="line10" />
  <!-- Step 1: Order Creation -->
  <rect
     x="190"
     y="140"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect10" />
  <text
     x="260"
     y="165"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text10">1. Create Order (NEW)</text>
  <line
     x1="110"
     y1="160"
     x2="190"
     y2="160"
     stroke="#2c3e50"
     stroke-width="2"
     id="line11" />
  <polygon
     points="185,155 195,160 185,165"
     fill="#2c3e50"
     id="polygon11" />
  <line
     x1="190"
     y1="180"
     x2="110"
     y2="180"
     stroke="#2c3e50"
     stroke-width="2"
     id="line12" />
  <polygon
     points="115,175 105,180 115,185"
     fill="#2c3e50"
     id="polygon12" />
  <text
     x="150"
     y="195"
     font-family="Arial"
     font-size="10"
     text-anchor="middle"
     id="text12">Return orderId</text>
  <!-- Step 2: Payment Initiation -->
  <rect
     x="340"
     y="220"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect12" />
  <text
     x="410"
     y="245"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text13">2. Initiate Payment</text>
  <line
     x1="110"
     y1="240"
     x2="340"
     y2="240"
     stroke="#2c3e50"
     stroke-width="2"
     id="line13" />
  <polygon
     points="335,235 345,240 335,245"
     fill="#2c3e50"
     id="polygon13" />
  <!-- Step 3: Order Status Update to PROCESSING -->
  <rect
     x="490"
     y="280"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect13" />
  <text
     x="560"
     y="300"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text14">3. Publish Status</text>
  <text
     x="560"
     y="315"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text15">Update (PROCESSING)</text>
  <line
     x1="410"
     y1="300"
     x2="490"
     y2="300"
     stroke="#2c3e50"
     stroke-width="2"
     id="line15" />
  <polygon
     points="485,295 495,300 485,305"
     fill="#2c3e50"
     id="polygon15" />
  <!-- Order Service subscribes -->
  <line
     x1="560"
     y1="320"
     x2="260"
     y2="320"
     stroke="#2c3e50"
     stroke-width="2"
     stroke-dasharray="5,5"
     id="line16" />
  <polygon
     points="265,315 255,320 265,325"
     fill="#2c3e50"
     id="polygon16" />
  <rect
     x="190"
     y="340"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect16" />
  <text
     x="260"
     y="365"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text16">Update Order Status</text>
  <!-- Step 4: Payment Request Dispatch -->
  <rect
     x="640"
     y="400"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect17" />
  <text
     x="710"
     y="425"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text17">4. Process Payment</text>
  <line
     x1="410"
     y1="420"
     x2="640"
     y2="420"
     stroke="#2c3e50"
     stroke-width="2"
     id="line17" />
  <polygon
     points="635,415 645,420 635,425"
     fill="#2c3e50"
     id="polygon17" />
  <!-- Step 5-6: Callback Handling -->
  <rect
     x="340"
     y="480"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect18" />
  <text
     x="410"
     y="505"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text18">5. Payment Callback</text>
  <line
     x1="710"
     y1="500"
     x2="480"
     y2="500"
     stroke="#2c3e50"
     stroke-width="2"
     id="line18" />
  <polygon
     points="485,495 475,500 485,505"
     fill="#2c3e50"
     id="polygon18" />
  <!-- Step 7: Update Payment Transaction Status -->
  <rect
     x="340"
     y="540"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect19" />
  <text
     x="410"
     y="560"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text19">6. Update Payment</text>
  <text
     x="410"
     y="575"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text20">Transaction Status</text>
  <!-- Step 8: Send Order Status Update (SUCCESS/FAILED) -->
  <rect
     x="490"
     y="600"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect20" />
  <text
     x="560"
     y="620"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text21">7. Publish Final</text>
  <text
     x="560"
     y="635"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text22">Status Update</text>
  <line
     x1="410"
     y1="620"
     x2="490"
     y2="620"
     stroke="#2c3e50"
     stroke-width="2"
     id="line22" />
  <polygon
     points="485,615 495,620 485,625"
     fill="#2c3e50"
     id="polygon22" />
  <!-- Order Service subscribes to final status -->
  <line
     x1="560"
     y1="640"
     x2="260"
     y2="640"
     stroke="#2c3e50"
     stroke-width="2"
     stroke-dasharray="5,5"
     id="line23" />
  <polygon
     points="265,635 255,640 265,645"
     fill="#2c3e50"
     id="polygon23" />
  <rect
     x="190"
     y="660"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect23" />
  <text
     x="260"
     y="680"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text23">Update Order Status</text>
  <text
     x="260"
     y="695"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text24">(SUCCESS/FAILED)</text>
  <!-- Step 9: Send Notification Message -->
  <rect
     x="490"
     y="720"
     width="140"
     height="40"
     rx="5"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="2"
     id="rect24" />
  <text
     x="560"
     y="740"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text25">8. Publish Payment</text>
  <text
     x="560"
     y="755"
     font-family="Arial"
     font-size="12"
     text-anchor="middle"
     id="text26">Result Notification</text>
  <line
     x1="410"
     y1="740"
     x2="490"
     y2="740"
     stroke="#2c3e50"
     stroke-width="2"
     id="line26" />
  <polygon
     points="485,735 495,740 485,745"
     fill="#2c3e50"
     id="polygon26" />
  <!-- Add Notification Service at the bottom -->
  <rect
     x="50"
     y="760"
     width="120"
     height="40"
     rx="5"
     fill="#fadbd8"
     stroke="#c0392b"
     stroke-width="2"
     id="rect26" />
  <text
     x="110"
     y="785"
     font-family="Arial"
     font-size="14"
     text-anchor="middle"
     id="text27">Notification Svc</text>
  <line
     x1="110"
     y1="760"
     x2="110"
     y2="710"
     stroke="#2c3e50"
     stroke-width="1"
     stroke-dasharray="5,5"
     id="line27" />
  <!-- Notification Service subscribes -->
  <line
     x1="560"
     y1="760"
     x2="110"
     y2="760"
     stroke="#2c3e50"
     stroke-width="2"
     stroke-dasharray="5,5"
     id="line28" />
  <polygon
     points="115,755 105,760 115,765"
     fill="#2c3e50"
     id="polygon28" />
  <!-- Legend -->
  <rect
     x="650"
     y="720"
     width="15"
     height="15"
     fill="#d6eaf8"
     stroke="#2874a6"
     stroke-width="1"
     id="rect28" />
  <text
     x="670"
     y="733"
     font-family="Arial"
     font-size="12"
     text-anchor="start"
     id="text28">Process Step</text>
  <line
     x1="650"
     y1="750"
     x2="665"
     y2="750"
     stroke="#2c3e50"
     stroke-width="2"
     id="line29" />
  <text
     x="670"
     y="753"
     font-family="Arial"
     font-size="12"
     text-anchor="start"
     id="text29">Synchronous Call</text>
  <line
     x1="650"
     y1="770"
     x2="665"
     y2="770"
     stroke="#2c3e50"
     stroke-width="2"
     stroke-dasharray="5,5"
     id="line30" />
  <text
     x="670"
     y="773"
     font-family="Arial"
     font-size="12"
     text-anchor="start"
     id="text30">Async Message</text>
</svg>
